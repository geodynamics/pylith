## Cubit file for Ridgecrest (2d) strike-slip example for hackathon 2023##
## Evan Marschall and Zechao Zhuo ##
#############################
## CUBITCOREFORM 2023.4 ######

## We make a 2D model by building a 3D geometry and only keep the free surface ##
## Clear Space##
reset


## Import SI units
#{Units('si')}

#{faultDepth = 7.5*km} 

### load in points ###
#journal file that has the lat lon points converted to UTM
# vertices 1,2,3,4 are corners of boundary
playback 'points.jou' 

## Make curves to later make surfaces ##
create curve spline location vertex 4 5 6 7 8 9 10 11 2 

create curve spline location vertex 1 12 13 14 15 16 17 18 3 

## Make the free surface ##
create surface vertex 1 2 3 4


## project surface to make volume ##
sweep surface 1 perpendicular distance {faultDepth} switchside {faultDepth} keep

## copy and move curves down and make fault surface ##
Curve 1 2 copy move z -{faultDepth} 
create surface curve 12 19 10 1
create surface curve 8 2 15 20

## Split the volume to make fault surfaces ##

webcut volume 2 with sheet surface 8
webcut volume 2 with sheet surface 9
webcut volume 5 with sheet surface 9

## Make copies of the surfaces cut by faults and delete volumes to make 2D ##
surface 21 31 25 19 copy
delete volume 2 5 6 7
delete surface 1 9 8

## split to make the fault ends ##
split curve 54 at vertex 5

split curve 64 at vertex 11
split curve 56 at vertex 18
split curve 62 at vertex 12

## merge everything ##
delete vertex all
imprint all
merge all


## rename stuff (see names) ##
curve 65 name "main_fault_ypos" #main fault in y+ of branch fault
curve 68 name "main_fault_yneg" #main fault in y- of branch fault
curve 71 name "branch_fault1" # branch fault
curve 69 name "branch_fault2" # branch fault

surface 32 name "surface_xneg" #Surface -x of main 
surface 34 name "surface_xpos"  #Surface +x of main
surface 35 name "surface_yneg" #Surface -x of main 
surface 33 name "surface_ypos"  #Surface +x of main

curve 57 name "c_ypos"
curve 61 name "c_xpos"
curve 63 name "c_yneg"
curve 55 name "c_xneg"
