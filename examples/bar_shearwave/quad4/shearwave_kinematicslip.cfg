# -*- Python -*-
[pylithapp]

# ----------------------------------------------------------------------
# RUNNING THE SIMULATON
# ----------------------------------------------------------------------

# This is not a self-contained simulation configuration file. This
# file only specifies the specific parameters for an explicit
# time-stepping problem using a fault with kinematically-specified
# slip.
#
# To run the simulation:
# pylith shearwave_kinematicslip.cfg
#
# Output will be directed to the directory output.

# ----------------------------------------------------------------------
# journal
# ----------------------------------------------------------------------
[pylithapp.journal.info]
faultcohesivekin = 1

# ----------------------------------------------------------------------
# problem
# ----------------------------------------------------------------------
[pylithapp.timedependent]
dimension = 2

# Uncomment the line below to switch to explicit time-stepping with a
# lumped Jacobian matrix.
#formulation = pylith.problems.ExplicitLumped

# ----------------------------------------------------------------------
# boundary conditions
# ----------------------------------------------------------------------
[pylithapp.timedependent.bc]
# Change the DirichletPoints BC to the AbsorbingDampers BC
x_pos = pylith.bc.AbsorbingDampers
x_neg = pylith.bc.AbsorbingDampers

[pylithapp.timedependent.bc.x_pos]
# Absorbing boundary condition on +x face of bar

# Name of nodeset from CUBIT
label = face_xpos

# Specify label and filename for spatial database with physical properties
db.label = Absorbing BC +x
db.iohandler.filename = matprops.spatialdb

# Specify the basis functions and quadrature:
# 1-D Lagrange cell in 2-D space with 2nd order quadrature
quadrature.cell = pylith.feassemble.FIATLagrange
quadrature.cell.dimension = 1
quadrature.cell.quad_order = 2

[pylithapp.timedependent.bc.x_neg]
# Absorbing boundary condition on -x face of bar

# Name of nodeset from CUBIT
label = face_xneg

# Specify label and filename for spatial database with physical properties
db.label = Absorbing BC -x
db.iohandler.filename = matprops.spatialdb

# Specify the basis functions and quadrature:
# 1-D Lagrange cell in 2-D space with 2nd order quadrature
quadrature.cell = pylith.feassemble.FIATLagrange
quadrature.cell.dimension = 1
quadrature.cell.quad_order = 2

# ----------------------------------------------------------------------
# faults
# ----------------------------------------------------------------------
[pylithapp.timedependent.interfaces.fault]

# Switch to Brune slip time function
eq_srcs.rupture.slip_function = pylith.faults.BruneSlipFn

[pylithapp.timedependent.interfaces.fault.eq_srcs.rupture.slip_function]

# Database specifying the final slip.
slip.iohandler.filename = kinematic_slip.spatialdb

# Database specifying rise_time.
rise_time.iohandler.filename = kinematic_risetime.spatialdb

# Database specifying time at which slip begins at each point.
slip_time.iohandler.filename = kinematic_sliptime.spatialdb

# ----------------------------------------------------------------------
# output
# ----------------------------------------------------------------------
# Set the filename for each type of output.

# Give basename for VTK domain output of solution over domain.
[pylithapp.problem.formulation.output.output]
writer.filename = output/kinematicslip.vtk

# Give basename for VTK fault output.
[pylithapp.timedependent.interfaces.fault.output]
writer.filename = output/kinematicslip-fault.vtk

# Give basename for VTK output of state variables.
[pylithapp.timedependent.materials.elastic.output]
writer.filename = output/kinematicslip-statevars.vtk
